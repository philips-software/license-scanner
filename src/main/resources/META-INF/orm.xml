<!--
  ~ This software and associated documentation files are
  ~
  ~ Copyright Â© 2020-2020 Koninklijke Philips N.V.
  ~
  ~ and is made available for use within Philips and/or within Philips products.
  ~
  ~ All Rights Reserved
  -->

<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm" version="2.0">
    <mapped-superclass class="com.philips.research.licensescanner.core.domain.Package">
        <attributes>
            <basic name="purl" access="FIELD">
                <column insertable="false" updatable="false"/>
                <lob/>
            </basic>
        </attributes>
    </mapped-superclass>
    <mapped-superclass class="com.philips.research.licensescanner.core.domain.Scan">
        <attributes>
            <basic name="uuid" access="FIELD" optional="false"/>
            <basic name="timestamp" access="FIELD" optional="false">
                <column name="created"/>
            </basic>
            <basic name="license" access="FIELD" optional="false">
                <lob/>
            </basic>
            <basic name="confirmed" access="FIELD" optional="false"/>
            <basic name="contested" access="FIELD" optional="false"/>
            <basic name="location" access="FIELD">
                <lob/>
            </basic>
            <basic name="error" access="FIELD">
                <lob/>
            </basic>
            <many-to-one name="pkg" access="FIELD"
                         target-entity="com.philips.research.licensescanner.persistence.PackageEntity">
                <join-column name="package_id"/>
            </many-to-one>
            <one-to-many name="detections" orphan-removal="true"
                         target-entity="com.philips.research.licensescanner.persistence.DetectionEntity">
                <map-key name="license"/>
                <join-column name="scan_id"/>
            </one-to-many>
        </attributes>
    </mapped-superclass>
    <mapped-superclass class="com.philips.research.licensescanner.core.domain.Detection">
        <attributes>
            <basic name="license">
                <lob/>
            </basic>
            <basic name="filePath">
                <lob/>
            </basic>
            <basic name="score">
                <column column-definition="SMALLINT"/>
            </basic>
        </attributes>
    </mapped-superclass>
</entity-mappings>
